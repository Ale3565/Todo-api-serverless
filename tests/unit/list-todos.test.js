"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_sdk_client_mock_1 = require("aws-sdk-client-mock");
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
const client_cloudwatch_1 = require("@aws-sdk/client-cloudwatch");
const list_todos_1 = require("../../src/lambda/handlers/list-todos");
const ddbMock = (0, aws_sdk_client_mock_1.mockClient)(lib_dynamodb_1.DynamoDBDocumentClient);
const cloudWatchMock = (0, aws_sdk_client_mock_1.mockClient)(client_cloudwatch_1.CloudWatchClient);
describe('list-todos handler', () => {
    beforeEach(() => {
        ddbMock.reset();
        cloudWatchMock.reset();
        // Setup default CloudWatch mock
        cloudWatchMock.on(client_cloudwatch_1.PutMetricDataCommand).resolves({});
    });
    it('should list todos successfully', async () => {
        const mockTodos = [
            { todoId: '1', title: 'Todo 1', completed: false, createdAt: '2023-01-01T00:00:00.000Z' },
            { todoId: '2', title: 'Todo 2', completed: true, createdAt: '2023-01-02T00:00:00.000Z' }
        ];
        ddbMock.on(lib_dynamodb_1.ScanCommand).resolves({ Items: mockTodos });
        const event = {
            httpMethod: 'GET',
            path: '/todos'
        };
        const result = await (0, list_todos_1.handler)(event);
        expect(result.statusCode).toBe(200);
        expect(JSON.parse(result.body).success).toBe(true);
        expect(JSON.parse(result.body).data.todos).toHaveLength(2);
        expect(JSON.parse(result.body).data.count).toBe(2);
        expect(ddbMock.commandCalls(lib_dynamodb_1.ScanCommand).length).toBe(1);
    });
    it('should return empty array when no todos exist', async () => {
        ddbMock.on(lib_dynamodb_1.ScanCommand).resolves({ Items: [] });
        const event = {
            httpMethod: 'GET',
            path: '/todos'
        };
        const result = await (0, list_todos_1.handler)(event);
        expect(result.statusCode).toBe(200);
        expect(JSON.parse(result.body).success).toBe(true);
        expect(JSON.parse(result.body).data.todos).toHaveLength(0);
        expect(JSON.parse(result.body).data.count).toBe(0);
    });
    it('should handle DynamoDB errors', async () => {
        ddbMock.on(lib_dynamodb_1.ScanCommand).rejects(new Error('DynamoDB Error'));
        const event = {
            httpMethod: 'GET',
            path: '/todos'
        };
        const result = await (0, list_todos_1.handler)(event);
        expect(result.statusCode).toBe(500);
        expect(JSON.parse(result.body).error).toBe('INTERNAL_ERROR');
    });
    it('should sort todos by creation date (newest first)', async () => {
        const mockTodos = [
            { todoId: '1', title: 'Old Todo', completed: false, createdAt: '2023-01-01T00:00:00.000Z' },
            { todoId: '2', title: 'New Todo', completed: true, createdAt: '2023-01-03T00:00:00.000Z' },
            { todoId: '3', title: 'Middle Todo', completed: false, createdAt: '2023-01-02T00:00:00.000Z' }
        ];
        ddbMock.on(lib_dynamodb_1.ScanCommand).resolves({ Items: mockTodos });
        const event = {
            httpMethod: 'GET',
            path: '/todos'
        };
        const result = await (0, list_todos_1.handler)(event);
        const responseData = JSON.parse(result.body).data;
        expect(result.statusCode).toBe(200);
        expect(responseData.todos[0].title).toBe('New Todo');
        expect(responseData.todos[1].title).toBe('Middle Todo');
        expect(responseData.todos[2].title).toBe('Old Todo');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC10b2Rvcy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGlzdC10b2Rvcy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsNkRBQWlEO0FBQ2pELHdEQUE0RTtBQUM1RSxrRUFBb0Y7QUFFcEYscUVBQStEO0FBRS9ELE1BQU0sT0FBTyxHQUFHLElBQUEsZ0NBQVUsRUFBQyxxQ0FBc0IsQ0FBQyxDQUFDO0FBQ25ELE1BQU0sY0FBYyxHQUFHLElBQUEsZ0NBQVUsRUFBQyxvQ0FBZ0IsQ0FBQyxDQUFDO0FBRXBELFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNoQixjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFdkIsZ0NBQWdDO1FBQ2hDLGNBQWMsQ0FBQyxFQUFFLENBQUMsd0NBQW9CLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDOUMsTUFBTSxTQUFTLEdBQUc7WUFDaEIsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsMEJBQTBCLEVBQUU7WUFDekYsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsMEJBQTBCLEVBQUU7U0FDekYsQ0FBQztRQUVGLE9BQU8sQ0FBQyxFQUFFLENBQUMsMEJBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBRXZELE1BQU0sS0FBSyxHQUFrQztZQUMzQyxVQUFVLEVBQUUsS0FBSztZQUNqQixJQUFJ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QUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJR2F0ZXdheVByb3h5RXZlbnQgfSBmcm9tICdhd3MtbGFtYmRhJztcclxuaW1wb3J0IHsgbW9ja0NsaWVudCB9IGZyb20gJ2F3cy1zZGstY2xpZW50LW1vY2snO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LCBTY2FuQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2xpYi1keW5hbW9kYic7XHJcbmltcG9ydCB7IENsb3VkV2F0Y2hDbGllbnQsIFB1dE1ldHJpY0RhdGFDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWNsb3Vkd2F0Y2gnO1xyXG5cclxuaW1wb3J0IHsgaGFuZGxlciB9IGZyb20gJy4uLy4uL3NyYy9sYW1iZGEvaGFuZGxlcnMvbGlzdC10b2Rvcyc7XHJcblxyXG5jb25zdCBkZGJNb2NrID0gbW9ja0NsaWVudChEeW5hbW9EQkRvY3VtZW50Q2xpZW50KTtcclxuY29uc3QgY2xvdWRXYXRjaE1vY2sgPSBtb2NrQ2xpZW50KENsb3VkV2F0Y2hDbGllbnQpO1xyXG5cclxuZGVzY3JpYmUoJ2xpc3QtdG9kb3MgaGFuZGxlcicsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGRkYk1vY2sucmVzZXQoKTtcclxuICAgIGNsb3VkV2F0Y2hNb2NrLnJlc2V0KCk7XHJcbiAgICBcclxuICAgIC8vIFNldHVwIGRlZmF1bHQgQ2xvdWRXYXRjaCBtb2NrXHJcbiAgICBjbG91ZFdhdGNoTW9jay5vbihQdXRNZXRyaWNEYXRhQ29tbWFuZCkucmVzb2x2ZXMoe30pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGxpc3QgdG9kb3Mgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9ja1RvZG9zID0gW1xyXG4gICAgICB7IHRvZG9JZDogJzEnLCB0aXRsZTogJ1RvZG8gMScsIGNvbXBsZXRlZDogZmFsc2UsIGNyZWF0ZWRBdDogJzIwMjMtMDEtMDFUMDA6MDA6MDAuMDAwWicgfSxcclxuICAgICAgeyB0b2RvSWQ6ICcyJywgdGl0bGU6ICdUb2RvIDInLCBjb21wbGV0ZWQ6IHRydWUsIGNyZWF0ZWRBdDogJzIwMjMtMDEtMDJUMDA6MDA6MDAuMDAwWicgfVxyXG4gICAgXTtcclxuXHJcbiAgICBkZGJNb2NrLm9uKFNjYW5Db21tYW5kKS5yZXNvbHZlcyh7IEl0ZW1zOiBtb2NrVG9kb3MgfSk7XHJcblxyXG4gICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICBodHRwTWV0aG9kOiAnR0VUJyxcclxuICAgICAgcGF0aDogJy90b2RvcydcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCBhcyBBUElHYXRld2F5UHJveHlFdmVudCk7XHJcblxyXG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICBleHBlY3QoSlNPTi5wYXJzZShyZXN1bHQuYm9keSkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdChKU09OLnBhcnNlKHJlc3VsdC5ib2R5KS5kYXRhLnRvZG9zKS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICBleHBlY3QoSlNPTi5wYXJzZShyZXN1bHQuYm9keSkuZGF0YS5jb3VudCkudG9CZSgyKTtcclxuICAgIGV4cGVjdChkZGJNb2NrLmNvbW1hbmRDYWxscyhTY2FuQ29tbWFuZCkubGVuZ3RoKS50b0JlKDEpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIHRvZG9zIGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgZGRiTW9jay5vbihTY2FuQ29tbWFuZCkucmVzb2x2ZXMoeyBJdGVtczogW10gfSk7XHJcblxyXG4gICAgY29uc3QgZXZlbnQ6IFBhcnRpYWw8QVBJR2F0ZXdheVByb3h5RXZlbnQ+ID0ge1xyXG4gICAgICBodHRwTWV0aG9kOiAnR0VUJyxcclxuICAgICAgcGF0aDogJy90b2RvcydcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlcihldmVudCBhcyBBUElHYXRld2F5UHJveHlFdmVudCk7XHJcblxyXG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICBleHBlY3QoSlNPTi5wYXJzZShyZXN1bHQuYm9keSkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdChKU09OLnBhcnNlKHJlc3VsdC5ib2R5KS5kYXRhLnRvZG9zKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICBleHBlY3QoSlNPTi5wYXJzZShyZXN1bHQuYm9keSkuZGF0YS5jb3VudCkudG9CZSgwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgRHluYW1vREIgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgZGRiTW9jay5vbihTY2FuQ29tbWFuZCkucmVqZWN0cyhuZXcgRXJyb3IoJ0R5bmFtb0RCIEVycm9yJykpO1xyXG5cclxuICAgIGNvbnN0IGV2ZW50OiBQYXJ0aWFsPEFQSUdhdGV3YXlQcm94eUV2ZW50PiA9IHtcclxuICAgICAgaHR0cE1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIHBhdGg6ICcvdG9kb3MnXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoZXZlbnQgYXMgQVBJR2F0ZXdheVByb3h5RXZlbnQpO1xyXG5cclxuICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xyXG4gICAgZXhwZWN0KEpTT04ucGFyc2UocmVzdWx0LmJvZHkpLmVycm9yKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHNvcnQgdG9kb3MgYnkgY3JlYXRpb24gZGF0ZSAobmV3ZXN0IGZpcnN0KScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tUb2RvcyA9IFtcclxuICAgICAgeyB0b2RvSWQ6ICcxJywgdGl0bGU6ICdPbGQgVG9kbycsIGNvbXBsZXRlZDogZmFsc2UsIGNyZWF0ZWRBdDogJzIwMjMtMDEtMDFUMDA6MDA6MDAuMDAwWicgfSxcclxuICAgICAgeyB0b2RvSWQ6ICcyJywgdGl0bGU6ICdOZXcgVG9kbycsIGNvbXBsZXRlZDogdHJ1ZSwgY3JlYXRlZEF0OiAnMjAyMy0wMS0wM1QwMDowMDowMC4wMDBaJyB9LFxyXG4gICAgICB7IHRvZG9JZDogJzMnLCB0aXRsZTogJ01pZGRsZSBUb2RvJywgY29tcGxldGVkOiBmYWxzZSwgY3JlYXRlZEF0OiAnMjAyMy0wMS0wMlQwMDowMDowMC4wMDBaJyB9XHJcbiAgICBdO1xyXG5cclxuICAgIGRkYk1vY2sub24oU2NhbkNvbW1hbmQpLnJlc29sdmVzKHsgSXRlbXM6IG1vY2tUb2RvcyB9KTtcclxuXHJcbiAgICBjb25zdCBldmVudDogUGFydGlhbDxBUElHYXRld2F5UHJveHlFdmVudD4gPSB7XHJcbiAgICAgIGh0dHBNZXRob2Q6ICdHRVQnLFxyXG4gICAgICBwYXRoOiAnL3RvZG9zJ1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGV2ZW50IGFzIEFQSUdhdGV3YXlQcm94eUV2ZW50KTtcclxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IEpTT04ucGFyc2UocmVzdWx0LmJvZHkpLmRhdGE7XHJcblxyXG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XHJcbiAgICBleHBlY3QocmVzcG9uc2VEYXRhLnRvZG9zWzBdLnRpdGxlKS50b0JlKCdOZXcgVG9kbycpOyBcclxuICAgIGV4cGVjdChyZXNwb25zZURhdGEudG9kb3NbMV0udGl0bGUpLnRvQmUoJ01pZGRsZSBUb2RvJyk7XHJcbiAgICBleHBlY3QocmVzcG9uc2VEYXRhLnRvZG9zWzJdLnRpdGxlKS50b0JlKCdPbGQgVG9kbycpOyBcclxuICB9KTtcclxufSk7Il19